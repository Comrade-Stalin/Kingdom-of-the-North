<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Map | Kingdom of the North</title>

  <!-- PAGE‑SCOPED STYLES (won't affect your other pages) -->
  <style>
    :root{
      --ink:#e7e1d1;         /* parchment text color */
      --bg:#0b0b0b;          /* site background */
      --pin:#e54343;         /* red pin color */
      --shadow:rgba(0,0,0,.55);
      --frame:rgba(0,0,0,.35);
    }

    /* Base layout */
    body.map-page{
      margin:0;
      background:var(--bg);
      color:var(--ink);
      font-family: Georgia, "Times New Roman", serif;
      display:flex;
      min-height:100vh;
      flex-direction:column;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 28px; background:#111; border-bottom:1px solid #222;
    }
    header .logo{ height:56px; }
    header nav{ display:flex; gap:22px; flex-wrap:wrap; }
    header nav a{ color:#e0e0e0; text-decoration:none; font-weight:700; font-size:15px; }
    header nav a:hover{ color:#ff6b6b; }

    footer{
      text-align:center; color:#9a9a9a; border-top:1px solid #222;
      padding:14px 10px; background:#0f0f0f;
      font-size:.95rem;
    }

    /* Map viewport fills the space between header and footer */
    .map-viewport{
      flex:1 1 auto;
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
      background:#000;
      box-shadow: inset 0 0 120px rgba(0,0,0,.6);
    }

    /* The wrapper is the positioning context for pins */
    .map-wrap{
      position:relative;
      max-width:min(1800px, 96vw);
      max-height:calc(100vh - 160px);  /* room for header/footer */
      aspect-ratio: 16 / 10;           /* rough aspect to avoid layout jump before image loads */
      box-shadow: 0 10px 40px var(--shadow);
      border:1px solid var(--frame);
      background:#1b1b1b;
    }
    .map-wrap img#northmap{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      user-select:none;
      -webkit-user-drag:none;
    }

    /* Pins are percentage-based inside .map-wrap */
    .pin{
      position:absolute; translate:-50% -50%;
      width:18px; height:18px; border-radius:50%;
      background:var(--pin);
      box-shadow:0 0 0 3px rgba(255,255,255,.12), 0 0 10px 2px rgba(0,0,0,.75);
      cursor:pointer;
      transition:transform .12s ease;
    }
    .pin:hover{ transform:scale(1.15); }

    /* Hint badge */
    .hint{
      position:absolute; top:10px; right:10px;
      background:rgba(0,0,0,.55); color:#ddd; font-size:.85rem;
      padding:6px 10px; border:1px solid rgba(255,255,255,.15); border-radius:6px;
      backdrop-filter: blur(3px);
      pointer-events:none;
    }

    /* Modal */
    .map-modal{
      position:fixed; inset:0; display:none;
      place-items:center;
      background:rgba(0,0,0,.55);
      z-index:50;
      padding:30px 20px;
    }
    .map-modal.open{ display:grid; }

    .sheet{
      width:min(1100px, 90vw);
      background:#e8d6a8;
      color:#2c2013;
      border:1px solid rgba(0,0,0,.3);
      border-radius:10px;
      box-shadow: 0 30px 120px rgba(0,0,0,.8), 0 0 0 6px rgba(0,0,0,.2) inset;
      position:relative;
      padding:26px 28px 28px 28px;
    }
    .sheet .close{
      position:absolute; top:8px; right:12px; font-size:28px; line-height:1;
      color:#3b2a1a; cursor:pointer; border:0; background:none;
    }
    .sheet h2{
      margin:0 0 6px 0; text-align:center; font-size:2rem; letter-spacing:.4px;
    }
    .sheet .sub{ text-align:center; font-style:italic; margin-bottom:16px; color:#4b3823; }

    /* Parchment banner behind the title */
    .banner{
      position:relative; text-align:center; margin:10px auto 18px auto;
      max-width: 980px;
    }
    .banner img{
      width:100%; height:auto; display:block; filter:drop-shadow(0 8px 18px rgba(0,0,0,.35));
    }

    .sheet p{ margin:0; font-size:1.1rem; line-height:1.7; }

    @media (max-width: 700px){
      .pin{ width:16px; height:16px; }
      .sheet h2{ font-size:1.6rem; }
      .sheet p{ font-size:1rem; }
    }
  </style>
</head>

<body class="map-page">
  <!-- Header -->
  <header>
    <img src="images/northlogo.png" alt="The Kingdom of the North" class="logo">
    <nav>
      <a href="index.html">Home</a>
      <a href="laws.html">Laws</a>
      <a href="court.html">Winter Court</a>
      <a href="guard.html">Winter Guard</a>
      <a href="map.html">Map</a>
      <a href="stories.html">Stories</a>
      <a href="discord.html">Join</a>
    </nav>
  </header>

  <!-- Map viewport -->
  <div class="map-viewport">
    <div class="map-wrap" id="wrap">
      <img id="northmap" src="images/northmap.jpg" alt="Map of the North">

      <div class="hint">Click the red markers for details</div>

      <!-- PINS INJECTED BY JS -->
    </div>
  </div>

  <!-- Modal -->
  <div id="modal" class="map-modal" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true">
      <button class="close" aria-label="Close" id="closeBtn">&times;</button>
      <h2 id="placeTitle">Winterfell</h2>
      <div class="sub" id="placeSub">Seat of House Stark</div>
      <div class="banner">
        <img src="images/parchment1.png" alt="">
      </div>
      <p id="placeText">
        The ancient heart of the North. From winter’s snows to summer’s storms, the grey keep endures, its crypts and godswood older than memory.
      </p>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    &copy; 2025 Kingdom of the North RP &nbsp;|&nbsp; From the Neck to the Shivering Sea
  </footer>

  <!-- Pins + Modal JS -->
  <script>
    /* Percent coordinates measured against northmap.jpg itself.
       If one is a hair off on your screen, nudge its x/y a tiny bit.  */

    const PLACES = [
      // name, sub, text, x%, y%
      ["Winterfell","Seat of House Stark",
       "The ancient heart of the North. From winter’s snows to summer’s storms, the grey keep endures, its crypts and godswood older than memory.",
       50.2, 48.7],

      ["Winter Town","Village of Winterfell",
       "Fires and frostbitten laughter in the cold months; carts and courtiers in the warm. The village thrives in Winterfell’s shadow.",
       52.0, 52.2],

      ["White Harbor","City of House Manderly",
       "A rare harbor on the cold eastern coast; trade, silver, and the New Keep where House Manderly rules by sea and charter.",
       61.8, 68.8],

      ["Dreadfort","Seat of House Bolton",
       "Leather and iron on an old, grim hill. The flayed men are gone, but memory clings to these stones like frost.",
       61.0, 56.4],

      ["Karhold","Seat of House Karstark",
       "Far and wind‑scoured; a stern hold watching the Bay of Seals and the long winter road.",
       69.2, 39.0],

      ["Last Hearth","Seat of House Umber",
       "A great hall on the edge of the true north; axes, ale, and a laughter as loud as the wind.",
       57.1, 33.5],

      ["Deepwood Motte","Seat of House Glover",
       "Timber, iron, and a fortress hidden in the Wolf’s Wood; the Glovers guard the western ways.",
       36.8, 41.6],

      ["Barrowton","Town of the Barrowlands",
       "A market town beside the graves of kings long gone; wool, barley, and old crowns of dirt.",
       46.7, 64.8],

      ["The Rills","The marshy lowlands",
       "Fertile, flooded, stubborn; the Rills raise hardy folk and herds between river and sea.",
       34.6, 65.9],

      ["Widow’s Watch","Coastal Holdfast",
       "A lonely tower staring east; sailors swear its light can be seen even through sea‑mist.",
       74.8, 73.5],

      ["Moat Cailin","The Neck",
       "Ancient, broken, and unbeatable from the south; a choke point of stone and swamp.",
       53.7, 83.7],

      ["The Dreaded Sheepshead Hills","Hills of Hornwood",
       "Rolling country of sheep and smokehouses feeding the east‑coast holds.",
       58.6, 61.4],

      ["Hornwood","Seat of House Hornwood",
       "Small but old house; rebuilt and resolute after the Bolton treacheries.",
       58.4, 63.8],

      ["Oldcastle","The Bite",
       "Salt winds and old stone keep watch over the Bite’s grey waters.",
       61.8, 78.5],

      ["Three Sisters","Isles",
       "Sisterton and her sisters tax every hull that dares the Shivering Sea.",
       64.9, 86.1],

      ["Bear Island","Seat of House Mormont",
       "Pine and claw, salt and steel; the Mormonts bend for no man.",
       43.9, 22.7],

      ["Flint’s Finger","Holdfast of House Flint",
       "An austere promontory on the Sunset Sea; the Flints keep a stubborn light burning.",
       40.2, 89.2],

      ["Lonely Hills","High country",
       "Bleak ridges where the wind sings; hardy shepherds and quiet holds.",
       58.1, 44.7],

      ["Torrhen’s Square","Hold of House Tallhart",
       "A stout square keep west of Winterfell, rebuilt and garrisoned anew.",
       45.9, 57.9],

      ["Ramsgate","Harbor village",
       "Where river meets sea beneath the eastern cliffs; nets, tar and gulls.",
       66.2, 70.9]
    ];

    const wrap   = document.getElementById('wrap');
    const img    = document.getElementById('northmap');
    const modal  = document.getElementById('modal');
    const title  = document.getElementById('placeTitle');
    const sub    = document.getElementById('placeSub');
    const text   = document.getElementById('placeText');
    const close  = document.getElementById('closeBtn');

    // build pins
    function addPins(){
      // remove existing (hot reload safety)
      [...wrap.querySelectorAll('.pin')].forEach(p => p.remove());

      PLACES.forEach(([name,subtitle,desc,x,y])=>{
        const pin = document.createElement('button');
        pin.className = 'pin';
        pin.style.left = x + '%';
        pin.style.top  = y + '%';
        pin.title = name;
        pin.addEventListener('click', () => {
          title.textContent = name;
          sub.textContent = subtitle || '';
          text.textContent = desc || '';
          modal.classList.add('open');
        });
        wrap.appendChild(pin);
      });
    }

    addPins();

    // modal controls
    close.addEventListener('click', ()=> modal.classList.remove('open'));
    modal.addEventListener('click', (e)=>{
      if(e.target === modal){ modal.classList.remove('open'); }
    });

    // accessibility: ESC closes
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape') modal.classList.remove('open');
    });
  </script>
</body>
</html>
