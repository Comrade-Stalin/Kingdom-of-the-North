<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Map | Kingdom of the North</title>
  <link rel="stylesheet" href="css/style.css" />

  <!-- Page-local styles (namespaced so they can’t clash with sitewide CSS) -->
  <style>
    /* --- Layout --- */
    body.map-page main {
      padding: 0;                /* you already added this override in style.css; here in case this file is viewed alone */
      min-height: 0;
    }

    .map-wrap {
      width: min(1500px, 96vw);
      margin: 0 auto;
      position: relative;
      user-select: none;
    }

    .map-image {
      display: block;
      width: 100%;
      height: auto;
    }

    .pin {
      position: absolute;
      width: 18px;
      height: 18px;
      transform: translate(-50%, -50%);
      cursor: pointer;
      z-index: 2;
    }

    /* Pin look (keep the style you liked: red core, dark ring, highlight) */
    .pin::before, .pin::after, .pin i {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 50%;
    }
    .pin::before {                      /* outer ring */
      background: radial-gradient(closest-side, #b92928 60%, #5a1b1b 62% 100%);
      filter: drop-shadow(0 0 4px rgba(0,0,0,.45));
    }
    .pin i {                            /* inner disc */
      top: 3px; left: 3px; right: 3px; bottom: 3px;
      background: radial-gradient(circle at 35% 35%, #ff6b6b 0 35%, #c7312c 60%, #7a1f1e 100%);
    }
    .pin::after {                       /* tiny spec highlight */
      width: 6px; height: 6px;
      left: 4px; top: 3px;
      background: rgba(255,255,255,.65);
      box-shadow: 1px 1px 4px rgba(255,255,255,.25);
    }

    /* helper bubble */
    .map-note {
      position: absolute;
      top: 12px; right: 12px;
      background: rgba(0,0,0,.55);
      color: #eaeaea;
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid rgba(255,255,255,.15);
      z-index: 3;
      pointer-events: none;
    }

    /* --- Parchment modal (map-only; class names don’t collide with site modal) --- */
    .map-scrim {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .map-scrim.show { display: flex; }

    .map-modal {
      position: relative;
      width: min(1100px, 92vw);
      max-height: 92vh;
      overflow: auto;
      background: #d8c6a1;                     /* parchment tone behind the PNG */
      border: 1px solid #bfae8a;
      border-radius: 8px;
      padding: clamp(16px, 2.5vw, 28px);
      box-shadow: 0 8px 40px rgba(0,0,0,.55);
      color: #2a2115;
    }

    .map-close {
      position: absolute;
      top: 10px;
      right: 14px;
      font-size: 24px;
      line-height: 1;
      background: transparent;
      border: none;
      color: #3a2d1b;
      cursor: pointer;
    }

    .map-title {
      text-align: center;
      font-size: clamp(22px, 2.2vw, 28px);
      font-weight: 700;
      margin: 4px 36px 2px 10px;
      letter-spacing: .3px;
    }
    .map-sub {
      text-align: center;
      font-style: italic;
      font-size: clamp(14px, 1.6vw, 16px);
      color: #6a5637;
      margin-bottom: 10px;
    }

    .scroll-wrap {
      position: relative;
      margin: 12px 0 16px 0;
      padding: clamp(18px, 2.4vw, 26px) clamp(18px, 3vw, 32px);
      background:
        url("images/parchment1.png") center/contain no-repeat;
      /* Keep a generous minimum so the text sits on top of the scroll art */
      min-height: clamp(220px, 38vh, 420px);
      display: flex;
      align-items: flex-end;            /* text toward bottom-ish inside scroll */
    }
    .scroll-body {
      width: 100%;
      font-size: clamp(15px, 1.75vw, 18px);
      line-height: 1.6;
      color: #2a2115;
      text-shadow: 0 1px 0 rgba(255,255,255,.25);
    }

    /* smaller screens: stack content a bit tighter */
    @media (max-width: 720px) {
      .scroll-wrap { align-items: center; min-height: 260px; }
      .scroll-body { font-size: 16px; }
    }
  </style>
</head>

<body class="map-page">
  <!-- Header (sitewide) -->
  <header>
    <img src="images/northlogo.png" alt="The Kingdom of the North" class="logo">
    <nav>
      <a href="index.html">Home</a>
      <a href="laws.html">Laws</a>
      <a href="court.html">Winter Court</a>
      <a href="guard.html">Winter Guard</a>
      <a href="map.html">Map</a>
      <a href="stories.html">Stories</a>
      <a href="discord.html">Discord</a>
    </nav>
  </header>

  <main>
    <div class="map-wrap" id="mapWrap">
      <img src="images/northmap.jpg" alt="Map of the North" class="map-image" id="northMap">
      <div class="map-note">Click the red markers for details</div>

      <!-- Pins (top/left are percentages relative to the image container) -->
      <!-- Tip: tweak these a percent or two if you want pixel-perfect alignment -->
      <button class="pin" style="top:57.7%; left:59.8%" data-title="Winterfell" data-sub="Seat of House Stark"
        data-body="The ancient heart of the North. From winter’s snows to summer’s storms, the grey keep endures, its crypts and godswood older than memory."><i></i></button>

      <button class="pin" style="top:77.3%; left:65.2%" data-title="White Harbor" data-sub="City of the Manderlys"
        data-body="The North’s only true city—bustling quays, the New Keep, and the Faith of the Seven amid a sea of old gods and older ways."><i></i></button>

      <button class="pin" style="top:81.6%; left:55.8%" data-title="Moat Cailin" data-sub="Choke of the Neck"
        data-body="Ancient stones sinking into the bog. A dozen towers once; a handful now—but enough to fear. The road south bends to the Moat’s will."><i></i></button>

      <button class="pin" style="top:33.8%; left:59.6%" data-title="Last Hearth" data-sub="Seat of House Umber"
        data-body="Timbered halls and hard men—closer to the howling snows than to any harbor, and none would have it otherwise."><i></i></button>

      <button class="pin" style="top:43.2%; left:69.6%" data-title="Karhold" data-sub="Seat of House Karstark"
        data-body="A severe keep on colder coasts—iron discipline, pale fires, and banners like winter’s sun."><i></i></button>

      <button class="pin" style="top:53.0%; left:44.1%" data-title="Deepwood Motte" data-sub="Seat of House Glover"
        data-body="Pine-dark hills and timber palisades; the Motte stands stubborn in wind and rain."><i></i></button>

      <button class="pin" style="top:64.7%; left:54.8%" data-title="Barrowton" data-sub="Seat of House Dustin"
        data-body="Built among the graves of kings. Every road in the Barrowlands seems to remember a crown."><i></i></button>

      <button class="pin" style="top:44.7%; left:51.6%" data-title="The Dreadfort" data-sub="Seat of House Bolton"
        data-body="Pale stone and darker tales; a fortress that watches the Weeping Water with an unblinking eye."><i></i></button>

      <button class="pin" style="top:50.1%; left:58.2%" data-title="The Lonely Hills" data-sub="High Cold Country"
        data-body="Bare, wind-sheared ridges where a rider is a speck against the sky and thunder walks the ground."><i></i></button>

      <button class="pin" style="top:59.2%; left:63.6%" data-title="Hornwood" data-sub="Seat of House Hornwood"
        data-body="Holds of hunters and good brown ale; the forests here carry antler-shadow and woodsmoke."><i></i></button>

      <button class="pin" style="top:68.9%; left:69.2%" data-title="Ramsgate" data-sub="Harbor of the Eastmarch"
        data-body="A hard little port where the wind never forgets its bite and ships tuck close against the cliffs."><i></i></button>

      <button class="pin" style="top:72.6%; left:61.1%" data-title="New Keep" data-sub="Harbor Ward of White Harbor"
        data-body="Warehouses, guildhalls, and the silver wake of departing cogs—coin clinks louder here than gulls."><i></i></button>

      <button class="pin" style="top:86.6%; left:59.6%" data-title="The Bite" data-sub="Cold Grey Sea"
        data-body="Iron waters and long horizons; sailors swear the Bite remembers every name it takes."><i></i></button>

      <button class="pin" style="top:16.4%; left:45.7%" data-title="The Land of Always Winter" data-sub="Far North"
        data-body="Unmapped snows and silent fells—beyond the maps and the memory of men."><i></i></button>

      <button class="pin" style="top:29.1%; left:39.7%" data-title="Bear Island" data-sub="Seat of House Mormont"
        data-body="Spruce-shadowed shores and hall of bearskins; the women of the isle carry spears as readily as men."><i></i></button>

      <button class="pin" style="top:62.6%; left:47.6%" data-title="Torrhen’s Square" data-sub="Stronghold of the Wolfswood"
        data-body="Square walls, stout hearts, and a candle in every window when riders come in from the rain."><i></i></button>

      <button class="pin" style="top:74.2%; left:48.6%" data-title="The Rills" data-sub="Marshland & Farms"
        data-body="Flooded flats laced with waterways—patient fields, reed cutters and riverwise folk."><i></i></button>
    </div>
  </main>

  <!-- Parchment modal -->
  <div class="map-scrim" id="mapScrim" aria-hidden="true">
    <div class="map-modal" role="dialog" aria-modal="true" aria-labelledby="mTitle">
      <button class="map-close" id="mapClose" aria-label="Close">×</button>
      <h2 class="map-title" id="mTitle">Title</h2>
      <div class="map-sub" id="mSub">Subtitle</div>
      <div class="scroll-wrap">
        <div class="scroll-body" id="mBody">
          <!-- filled by JS -->
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 Kingdom of the North RP | Bound by Blood, Led by Honor</p>
  </footer>

  <script>
    // Map modal logic (map-only)
    const scrim = document.getElementById('mapScrim');
    const closeBtn = document.getElementById('mapClose');
    const titleEl = document.getElementById('mTitle');
    const subEl = document.getElementById('mSub');
    const bodyEl = document.getElementById('mBody');

    function openModal(fromPin) {
      titleEl.textContent = fromPin.dataset.title || '';
      subEl.textContent   = fromPin.dataset.sub || '';
      bodyEl.textContent  = fromPin.dataset.body || '';
      scrim.classList.add('show');
      scrim.setAttribute('aria-hidden', 'false');
    }

    function closeModal() {
      scrim.classList.remove('show');
      scrim.setAttribute('aria-hidden', 'true');
    }

    document.querySelectorAll('.pin').forEach(pin => {
      pin.addEventListener('click', () => openModal(pin));
      pin.addEventListener('keydown', e => { if (e.key === 'Enter') openModal(pin); });
      pin.setAttribute('aria-label', pin.dataset.title || 'Location');
    });

    closeBtn.addEventListener('click', closeModal);
    scrim.addEventListener('click', (e) => { if (e.target === scrim) closeModal(); });
    window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });
  </script>
</body>
</html>
